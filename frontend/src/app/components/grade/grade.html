<div *ngIf="!turmaId || !disciplinaId">Selecione turma e disciplina.</div>
<div *ngIf="loading">Carregando...</div>
<div *ngIf="errorMsg" style="color:red">{{errorMsg}}</div>

<table *ngIf="turmaId && disciplinaId && alunos.length">
  <thead>
    <tr>
      <th>Aluno</th>
      <th *ngFor="let a of avaliacoes">{{a.titulo}} (peso {{a.peso}})</th>
      <th>Média</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let aluno of alunos">
      <td>{{aluno.nome}}</td>
      <td *ngFor="let a of avaliacoes">
        <input
          type="number"
          step="0.1"
          min="0"
          max="10"
          [value]="notas.get(key(aluno.id,a.id)) ?? ''"
          (input)="onNotaChange(aluno.id, a.id, $event.target.value)"
          style="width:80px"
        />
      </td>
      <td>{{medias.get(aluno.id)}}</td>
    </tr>
  </tbody>
</table>

<button (click)="salvar()" [disabled]="loading">Salvar Lançamentos</button>

